{"version":3,"sources":["classHandlers.js"],"names":["tokenUtils","require","handlerUtils","handleClass","parseContext","expectToken","tokens","shift","length","className","statement","nextToken","handleGrows","handleMaker","declareArguments","SyntaxError","parseInfo","handleGit","getterName","handleSit","setterName","argumentName","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,UAAU;AAAA;AAAA,wBAAGC,OAAO,CAAC,oBAAD,CAAV,CAAd;AACA,IAAIC,YAAY;AAAA;AAAA,wBAAGD,OAAO,CAAC,sBAAD,CAAV,CAAhB;AAEA;;;;;;;;AAOA,SAASE,WAAT,CAAqBC,YAArB,EAAmC;AAAA;AAAA;AAAA;AAC/BJ,EAAAA,UAAU,CAACK,WAAX,CAAuB,QAAvB,EAAiCD,YAAjC,EAD+B,CAG/B;;AAH+B;AAAA;AAI/BA,EAAAA,YAAY,CAACE,MAAb,CAAoBC,KAApB;AAEA,MAAID,MAAM;AAAA;AAAA,0BAAGF,YAAY,CAACE,MAAhB,CAAV;AAEA;;;;AAR+B;AAAA;;AAW/B,MAAGA,MAAM,CAACE,MAAP,GAAgB,CAAnB,EACA;AAAA;AAAA;AAAA;AACE,WAAO,WAAP;AACD,GAHD;AAAA;AAAA;AAAA;AAAA;;AAKA,MAAIC,SAAS;AAAA;AAAA,0BAAGL,YAAY,CAACE,MAAb,CAAoBC,KAApB,EAAH,CAAb;AACA,MAAIG,SAAS;AAAA;AAAA,0BAAG,WAAWD,SAAd,CAAb;AAEA;;;;AAnB+B;AAAA;;AAsB/B,MAAGH,MAAM,CAACE,MAAP,GAAgB,CAAnB,EACA;AAAA;AAAA;AACE,QAAIG,SAAS;AAAA;AAAA,6BAAGL,MAAM,CAAC,CAAD,CAAT,CAAb;;AADF;AAAA;;AAEE,QAAGK,SAAS,IAAI,OAAhB,EAAyB;AAAA;AAAA;AAAA;AACvBD,MAAAA,SAAS,IAAI,MAAME,WAAW,CAACR,YAAD,CAA9B;AACD,KAFD;AAAA;AAAA;AAAA;AAAA;AAGD,GAND;AAAA;AAAA;AAAA;AAAA;;AAtB+B;AA8B/BM,EAAAA,SAAS,IAAI,KAAb;;AA9B+B;AAAA;AA+B/B,SAAOA,SAAP;AACD;AAED;;;;;;;;;AAOA,SAASG,WAAT,CAAqBT,YAArB,EAAmC;AAAA;AAAA;AAAA;AACjCJ,EAAAA,UAAU,CAACK,WAAX,CAAuB,OAAvB,EAAgCD,YAAhC;AAEA,MAAIE,MAAM;AAAA;AAAA,2BAAGF,YAAY,CAACE,MAAhB,CAAV,CAHiC,CAKjC;;AALiC;AAAA;AAMjCA,EAAAA,MAAM,CAACC,KAAP;;AANiC;AAAA;AAQjC,SAAQ,gBAAgBL,YAAY,CAACY,gBAAb,CAA8BV,YAA9B,CAAxB;AACD;AAED;;;;;;;;;AAOA,SAASQ,WAAT,CAAqBR,YAArB,EAAmC;AAAA;AAAA;AAAA;AACjCJ,EAAAA,UAAU,CAACK,WAAX,CAAuB,OAAvB,EAAgCD,YAAhC;AAEA,MAAIE,MAAM;AAAA;AAAA,2BAAGF,YAAY,CAACE,MAAhB,CAAV,CAHiC,CAKjC;;AALiC;AAAA;AAMjCA,EAAAA,MAAM,CAACC,KAAP;;AANiC;AAAA;;AAQjC,MAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EAAuB;AAAA;AAAA;AAAA;AACrB,UAAM,IAAIO,WAAJ;AAAA;AAAA,wFAA6FC,SAAS,CAACZ,YAAD,CAAtG,EAAN;AACD,GAFD;AAAA;AAAA;AAAA;AAAA;;AARiC;AAYjC,SAAO,aAAaE,MAAM,CAACC,KAAP,EAApB;AACD;AAEH;;;;;;;;;AAOA,SAASU,SAAT,CAAmBb,YAAnB,EAAiC;AAAA;AAAA;AAAA;AAC7BJ,EAAAA,UAAU,CAACK,WAAX,CAAuB,KAAvB,EAA8BD,YAA9B;AAEA,MAAIE,MAAM;AAAA;AAAA,2BAAGF,YAAY,CAACE,MAAhB,CAAV,CAH6B,CAK7B;;AAL6B;AAAA;AAM7BA,EAAAA,MAAM,CAACC,KAAP;;AAN6B;AAAA;;AAQ7B,MAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EAAuB;AAAA;AAAA;AAAA;AACnB,UAAM,IAAIO,WAAJ;AAAA;AAAA,mFAAwFf,UAAU,CAACgB,SAAX,CAAqBZ,YAArB,CAAxF,EAAN;AACH,GAFD;AAAA;AAAA;AAAA;AAAA;;AAIA,MAAIc,UAAU;AAAA;AAAA,2BAAGZ,MAAM,CAACC,KAAP,EAAH,CAAd;;AAZ6B;AAAA;AAa7B,SAAO,SAASW,UAAT,GAAsB,OAA7B;AACH;AAED;;;;;;;;;AAOA,SAASC,SAAT,CAAmBf,YAAnB,EAAiC;AAAA;AAAA;AAAA;AAC7BJ,EAAAA,UAAU,CAACK,WAAX,CAAuB,KAAvB,EAA8BD,YAA9B;AAEA,MAAIE,MAAM;AAAA;AAAA,2BAAGF,YAAY,CAACE,MAAhB,CAAV,CAH6B,CAK7B;;AAL6B;AAAA;AAM7BA,EAAAA,MAAM,CAACC,KAAP;;AAN6B;AAAA;;AAQ7B,MAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EAAuB;AAAA;AAAA;AAAA;AACnB,UAAM,IAAIO,WAAJ;AAAA;AAAA,8FAAmGf,UAAU,CAACgB,SAAX,CAAqBZ,YAArB,CAAnG,EAAN;AACH,GAFD;AAAA;AAAA;AAAA;AAAA;;AAIA,MAAIgB,UAAU;AAAA;AAAA,2BAAGd,MAAM,CAACC,KAAP,EAAH,CAAd;;AAZ6B;AAAA;;AAc7B,MAAID,MAAM,CAAC,CAAD,CAAN,IAAa,MAAjB,EACA;AAAA;AAAA;AAAA;AACI,UAAM,IAAIS,WAAJ;AAAA;AAAA,yCAA8CT,MAAM,CAAC,CAAD,CAApD,4BAAyEA,MAAzE,0DAA+HN,UAAU,CAACgB,SAAX,CAAqBZ,YAArB,CAA/H,EAAN;AACH,GAHD;AAAA;AAAA;AAAA;AAAA,GAd6B,CAmB7B;;;AAnB6B;AAoB7BE,EAAAA,MAAM,CAACC,KAAP;;AApB6B;AAAA;;AAsB7B,MAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EACA;AAAA;AAAA;AAAA;AACI,UAAM,IAAIO,WAAJ;AAAA;AAAA,kGAAuGf,UAAU,CAACgB,SAAX,CAAqBZ,YAArB,CAAvG,EAAN;AACH,GAHD;AAAA;AAAA;AAAA;AAAA;;AAKA,MAAIiB,YAAY;AAAA;AAAA,2BAAGf,MAAM,CAACC,KAAP,EAAH,CAAhB,CA3B6B,CA6B7B;;AA7B6B;AAAA;AA8B7B;AAAA;AAAA,kBAAca,UAAd,eAA6BC,YAA7B;AAAA;AACH;;;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACbN,EAAAA,SAAS,EAATA,SADa;AACFE,EAAAA,SAAS,EAATA,SADE;AACUhB,EAAAA,WAAW,EAAXA,WADV;AACuBS,EAAAA,WAAW,EAAXA,WADvB;AACoCC,EAAAA,WAAW,EAAXA;AADpC,CAAjB","sourcesContent":["var tokenUtils = require('../util/tokenUtils');\r\nvar handlerUtils = require('../util/handlerUtils');\r\n\r\n/**\r\n * Handles class declarations:\r\n *   classy <ClassName>\r\n *\r\n * Produces:\r\n *   class <ClassName> {\r\n */\r\nfunction handleClass(parseContext) {\r\n    tokenUtils.expectToken('classy', parseContext);\r\n  \r\n    // consume: classy\r\n    parseContext.tokens.shift();\r\n  \r\n    var tokens = parseContext.tokens;\r\n  \r\n    /**\r\n     * We're in a class expression without extension\r\n     */\r\n    if(tokens.length < 1)\r\n    {\r\n      return \"class {\\n\";\r\n    }\r\n  \r\n    var className = parseContext.tokens.shift();\r\n    var statement = \"class \" + className;\r\n  \r\n    /**\r\n     * Check if there's a grows ParentClassName\r\n     */\r\n    if(tokens.length > 0)\r\n    {\r\n      var nextToken = tokens[0];\r\n      if(nextToken == 'grows') {\r\n        statement += \" \" + handleGrows(parseContext);\r\n      }\r\n    }\r\n  \r\n    statement += \"{\\n\";\r\n    return statement;\r\n  }\r\n  \r\n  /**\r\n   * Handles constructor declarations:\r\n   * maker <args>\r\n   *\r\n   * Produces:\r\n   *  constructor <args> {\r\n   */\r\n  function handleMaker(parseContext) {\r\n    tokenUtils.expectToken('maker', parseContext);\r\n  \r\n    var tokens = parseContext.tokens;\r\n  \r\n    // consume: maker\r\n    tokens.shift();\r\n  \r\n    return  'constructor' + handlerUtils.declareArguments(parseContext);\r\n  }\r\n  \r\n  /**\r\n   * Handles class extension declarations:\r\n   * grows <ClassName>\r\n   *\r\n   * Produces:\r\n   *  extends <ClassName>\r\n   */\r\n  function handleGrows(parseContext) {\r\n    tokenUtils.expectToken('grows', parseContext);\r\n  \r\n    var tokens = parseContext.tokens;\r\n  \r\n    // consume: grows\r\n    tokens.shift();\r\n  \r\n    if (tokens.length < 1) {\r\n      throw new SyntaxError(`Expected ClassName but got nothing. Allowed construct: grows [ClassName]. ${parseInfo(parseContext)}`);\r\n    }\r\n  \r\n    return 'extends ' + tokens.shift();\r\n  }\r\n\r\n/**\r\n * Handles getter method declarations:\r\n * git <name>\r\n * \r\n * Produces:\r\n *  get <name> () {\r\n */\r\nfunction handleGit(parseContext) {\r\n    tokenUtils.expectToken('git', parseContext);\r\n    \r\n    var tokens = parseContext.tokens;\r\n\r\n    // consume: git\r\n    tokens.shift();\r\n\r\n    if (tokens.length < 1) {\r\n        throw new SyntaxError(`Expected getter name but got nothing. Allowed construct: git [name]. ${tokenUtils.parseInfo(parseContext)}`);\r\n    }\r\n\r\n    var getterName = tokens.shift();\r\n    return 'get ' + getterName + \" () {\";\r\n}\r\n\r\n/**\r\n * Handles setter method declarations:\r\n * sit <name> with <arg>\r\n * \r\n * Produces:\r\n *  set <name> (arg) {\r\n */\r\nfunction handleSit(parseContext) {\r\n    tokenUtils.expectToken('sit', parseContext);\r\n\r\n    var tokens = parseContext.tokens;\r\n\r\n    // consume: sit\r\n    tokens.shift();\r\n\r\n    if (tokens.length < 1) {\r\n        throw new SyntaxError(`Expected setter name but got nothing. Allowed construct: sit [name] with [arg]. ${tokenUtils.parseInfo(parseContext)}`);\r\n    }\r\n\r\n    var setterName = tokens.shift();\r\n\r\n    if (tokens[0] != 'with') \r\n    {\r\n        throw new SyntaxError(`Expected: 'with' but got: '${tokens[0]}' from chain: [${tokens}]. Allowed construct: sit [name] with [arg]. ${tokenUtils.parseInfo(parseContext)}`);\r\n    }\r\n\r\n    // consume: with\r\n    tokens.shift();\r\n\r\n    if (tokens.length < 1)\r\n    {\r\n        throw new SyntaxError(`Expected setter argument but got nothing. Allowed construct: sit [name] with [arg]. ${tokenUtils.parseInfo(parseContext)}`);\r\n    }\r\n\r\n    var argumentName = tokens.shift();\r\n\r\n    // TODO potentially call 'handleWith'\r\n    return `set ${setterName} (${argumentName}) {`;\r\n}\r\n\r\nmodule.exports = {\r\n    handleGit, handleSit , handleClass, handleGrows, handleMaker\r\n}"]}